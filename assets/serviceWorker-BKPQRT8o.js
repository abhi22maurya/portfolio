const c=()=>{"serviceWorker"in navigator&&window.addEventListener("load",()=>{const o="/sw.js",n=async t=>{try{const e=await navigator.serviceWorker.register(t);e.onupdatefound=()=>{const r=e.installing;r&&(r.onstatechange=()=>{r.state==="installed"&&(navigator.serviceWorker.controller?(console.log("New content is available; please refresh."),window.dispatchEvent&&window.dispatchEvent(new CustomEvent("sw-update",{detail:e}))):console.log("Content is cached for offline use."))})},setInterval(()=>{e.update().catch(r=>console.error("Error checking for service worker update:",r))},36e5)}catch(e){console.error("Error during service worker registration:",e)}};(async t=>{try{const e=await fetch(t,{headers:{"Service-Worker":"script"}}),r=e.headers.get("content-type");e.status===404||r!=null&&r.indexOf("javascript")===-1?(await(await navigator.serviceWorker.ready).unregister(),window.location.reload()):n(o)}catch{console.log("No internet connection found. App is running in offline mode.")}})(o)})};export{c as registerServiceWorker};
